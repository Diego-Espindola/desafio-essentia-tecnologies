<h1>Minhas Tarefas</h1>
<h2>Aplicativo To-Do <small>by Diego Espindola</small></h2>

<div class="task-container">

  <!-- FORMULÁRIO DE NOVA TAREFA -->
  <form (ngSubmit)="addTask()" class="new-task-form">
    <div class="form-group">
      <label for="titulo">Título</label>
      <input type="text" id="titulo" [(ngModel)]="newTask.title" name="title" required placeholder="Título da tarefa" />
    </div>

    <div class="form-group">
      <label for="descricao">Descrição</label>
      <textarea id="descricao" [(ngModel)]="newTask.description" name="description" placeholder="Descrição da tarefa"></textarea>
    </div>

    <button type="submit" class="btn btn-success">Adicionar Tarefa</button>
  </form>

  <hr> <div *ngIf="errorMessage" class="error-message">
    <p>{{ errorMessage }}</p>
  </div>

  <!-- LISTA DE TAREFAS -->
  <div *ngIf="!errorMessage && tasks.length > 0; else noTasks">
    <ul class="task-list">
      <li *ngFor="let task of tasks" class="task-item" [class.done]="task.done">
        <div class="task-text">
          <strong>{{ task.title }}</strong><br />
          <small>{{ task.description }}</small>
        </div>
        <div class="task-actions">
          <button class="btn btn-done" (click)="markAsDone(task)">✔ Feito</button>
          <button class="btn btn-delete" (click)="deleteTask(task)">🗑 Excluir</button>
        </div>
      </li>
    </ul>
  </div>

  <ng-template #noTasks>
    <p *ngIf="!errorMessage" class="no-tasks-msg">Você ainda não tem tarefas cadastradas.</p>
  </ng-template>

  <ng-template #conditionalMessage>
    <p *ngIf="!errorMessage && tasks.length === 0" class="error-msg">Erro ao carregar tarefas. Verifique seu banco de dados e tente novamente.</p>
  </ng-template>

</div>